{
  "title": "Обновление массива с различными вариантами групп",
  "text": "\r\nТеперь давайте рассмотрим похожую ситуацию за исключением того что вместо различных вариантов шаблонов, у нас в каждом элементе будут отображаться списки из различных групп:\r\n\r\nНачальная разметка присылаемая сервером при первой загрузке:\r\n\r\n```html\r\n<div class=\"container-fluid\">\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-12\">\r\n<!--------------------------------->  \r\n\r\n\t\t<div data-test_array=\"array\" class=\"row\">\r\n\t\t\r\n\t\t\t<div data-test_container=\"container\" class=\"card col-3\">\r\n\t\t\t\t<p data-test_container-main_text=\"text\">контейнер 1</p>\r\n\t\t\t\t<div data-test_container-test_group=\"group\">\r\n\t\t\t\t\r\n\t\t\t\t     <div data-group_cont_2=\"container\" style=\"border: 1px solid red\">\r\n\t\t\t\t\t\t<p data-group_cont_2-text=\"text\" data-group_cont_2-style=\"style\" style=\"color: blue;\" > текст варианта 2 </p>\r\n\t\t\t\t\t\t<p data-group_cont_2-text2=\"text\">дополнительный текст1</p>\r\n\t\t\t\t\t </div>\r\n\t\t\t\t     <div data-group_cont_2=\"container\" style=\"border: 1px solid red\">\r\n\t\t\t\t\t\t<p data-group_cont_2-text=\"text\" data-group_cont_2-style=\"style\" style=\"color: blue;\" > текст варианта 2 </p>\r\n\t\t\t\t\t\t<p data-group_cont_2-text2=\"text\">дополнительный текст2</p>\r\n\t\t\t\t\t </div>\r\n\t\t\t\t\t \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div data-test_container=\"container\" class=\"card col-3\">\r\n\t\t\t\t<p data-test_container-main_text=\"text\">контейнер 2</p>\r\n\t\t\t\t<div data-test_container-test_group=\"group\">\r\n\t\t\t\t\r\n\t\t\t\t\t<div data-group_cont_1=\"container\" style=\"border: 1px solid green\">\r\n\t\t\t\t\t\t<p data-group_cont_1-text=\"text\" data-group_cont_1-style=\"style\" style=\"color: green;\" > текст варианта 1 </p>\r\n\t\t\t\t\t </div>\r\n\t\t\t\t\t <div data-group_cont_1=\"container\" style=\"border: 1px solid green\">\r\n\t\t\t\t\t\t<p data-group_cont_1-text=\"text\" data-group_cont_1-style=\"style\" style=\"color: green;\" > текст варианта 1 </p>\r\n\t\t\t\t\t </div>\r\n\r\n\t\t\t\t\t \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\r\n\t\t</div>\r\n\t\t\r\n <!--------------------------------->  \r\n\t\t</div>\t\r\n\t</div>\r\n</div>\r\n```\r\n\r\nОписание приложения:\r\n\r\n```javascript\r\n\r\nvar StateMap = {\r\n\t\r\n\ttest_array: {\r\n\t\t\r\n\t\tcontainer: \"test_container\",\r\n\t\tprops: [\"test_group\", \"main_text\"],\r\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\t\t\r\n\t},\r\n\tvirtualArrayComponents: {\r\n\t\t\r\n\t\tgroup_array_1:{\r\n\t\t\tcontainer: \"group_cont_1\",\r\n\t\t\tprops: [\"text\", \"style\"],\r\n\t\t\tmethods: {\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\t\t\t\r\n\t\t},\r\n\t\tgroup_array_2:{\r\n\t\t\tcontainer: \"group_cont_2\",\r\n\t\t\tprops: [\"text\", \"style\", \"text2\"],\r\n\t\t\tmethods: {\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\t\t\t\r\n\t\t},\t\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n}\r\n\r\n\r\nwindow.onload = function(){\r\n\t\r\n\tvar HM = new HtmlixState(StateMap);\r\n\t\r\n\tconsole.log(HM);\r\n}\r\n```\r\nДанные с сервера которые нужно обновить:\r\n\r\n```javascript\r\n\r\n\tvar resp = [\r\n\t\r\n\t{main_text: \"Название 1\", test_group: {componentName: \"group_array_1\", group:[{text: \"оновной текст 2\", style: \"color: yellow;\"}, {text: \"оновной текст gg\", style: \"color: red;\"}   ] } },\r\n\t{main_text: \"Название 2\", test_group: {componentName: \"group_array_2\", group:[{text: \"оновной текст 3\", text2: \"дополнительный текст3\", style: \"color: red;\"} , {text: \"оновной текст 4\", text2: \"дополнительный текст4\", style: \"color: blue;\"}   ] } },\r\n\t{main_text: \"Название 3\", test_group: {componentName: \"group_array_1\", group:[{text: \"оновной текст 2\", style: \"color: yellow;\"}, {text: \"оновной текст gg\", style: \"color: red;\"}, {text: \"оновной текст gg\", style: \"color: black;\"}    ] } },\r\n\t{main_text: \"Название 4\", test_group: {componentName: \"group_array_2\", group:[{text: \"оновной текст gg\", text2: \"дополнительный текст2\", style: \"color: blue;\"}, {text: \"оновной текст gg\", text2: \"дополнительный текст5\", style: \"color: green;\"}, {text: \"оновной текст gg\", text2: \"дополнительный текст6\", style: \"color: blue;\"}   ] } },\r\n\t\r\n\t];\r\n\r\n```\r\n\r\nТакой же принцип как и у render-variant только теперь в каждом свойстве test_group у нас объект с двумя обязательными полями componentName - имя виртуального массива и \r\ngroup - массив с обьектами для каждого пункта обновляемой группы.\r\n\r\n\r\n```javascript\r\n\r\nwindow.setTimeout( function(){ \r\n\t\r\n\tHM.state[\"test_array\"].reuseAll(resp);\r\n\t\r\n\t\r\n\t\r\n\tconsole.log(HM.state[\"test_array\"].getAll());\r\n\t\r\n\t\r\n\t//получение данных только необходимых свойств\r\n\tconsole.log(HM.state[\"test_array\"].getAll({main_text: \"\", test_group: {text: \"\", text2: \"\"} }));\r\n\t\r\n\t\r\n\tconsole.log(HM.state[\"test_array\"].getAll({main_text: \"\", test_group: {componentName: \"\", text: \"\", text2: \"\"} }));\r\n\t\r\n\t}, 2000);\r\n\r\n```\r\n* <a href=\"https://github.com/SergeyOvechkin/tests/tree/master/group-variant\"> рабочий пример кода выше </a>\r\n"
}