<!DOCTYPE html>
 <html lang="ru">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://sergeyovechkin.github.io/simple-cms/static/css/bootstrap.min.css">
		 <script src="https://unpkg.com/showdown/dist/showdown.min.js"></script>
		<link rel="stylesheet" href="https://sergeyovechkin.github.io/simple-cms/static/css/main.css">
    </head>
<body>
<button data-save_page="container" style="display: none;">Save page</button>
<div class="container-fluid">



<nav data-menu="array" class="navbar navbar-expand-sm navbar-light bg-light">
		
		<div data-menu-mobail_toggler="click" class="toggler-mobail-nav-type mr-auto" style="background-color: #ebf5ff; width: 100%;">
		  <a href="#" style="font-size: 25px; margin-left: 7px; "> = </a>
		</div>	
		<ul data-menu-mobail_toggler_style="style" class="navbar-nav mr-auto">
												
			 <li class="nav-item" data-menu_item="container">
					<a data-menu_item-title="text" data-menu_item-click="click" data-menu_item-class="class" data-menu_item-data="home" class="nav-link" href="/">Home</a>
					<ul class="hover-non">
					
					</ul>
			  </li>
			  
			   <li class="nav-item" data-menu_item="container">
					<a data-menu_item-title="text" data-menu_item-click="click" data-menu_item-class="class" data-menu_item-data="api" class="nav-link" href="/contacts">api</a>
					<ul class="hover-non">
					
					<li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="terms">   <span data-item_level_2_top-title="text">Термины</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="31782">Компоненты </a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="20010">Свойства</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="19950">Описание и экземпляр приложения</a>
							   </li></ul>
						</li><li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="create_components">   <span data-item_level_2_top-title="text">Создание компонентов</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="24545">Создание контейнера</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="79619">Добавление свойств в контейнер</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="49617">Создание массива</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="26365">Добавление контейнеров в массив</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="22997">Добавление пользовательских событий</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="78876">Прослушивание пользовательских событий из свойств массива</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="76769">Создание виртуального массива</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="91564">Смена отображаемых компонентов - render-variant</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="4099">Смена отображаемых компонентов - fetchComponents </a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="17990"> Обновление  массива с различными вариантами шаблонов </a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="58350">Получение сразу всех данных из массива</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="6741">Обновление массива с различными вариантами групп</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="93566">Наследование компонентов</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="41234">Наследование отдельных свойств компонентов</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="89894">Вспомогательные методы - aux</a>
							   </li></ul>
						</li><li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="app_structure">   <span data-item_level_2_top-title="text">Структура приложения</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="17027">Навигация</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="40635">Экземпляр приложения</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="57226">Структура свойства Prop</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="64489">Структура контейнера Container</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="28365">Структура массива HTMLixArray</a>
							   </li></ul>
						</li><li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="data_types">   <span data-item_level_2_top-title="text">Типы данных</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="62713">Общие сведения</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="40591">getProp()</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="35443">setProp("newProp")</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="32847">removeProp()</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="36021">group</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="61069">render-variant</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="66516">Дополнительные методы для свойств - событий</a>
							   </li></ul>
						</li><li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="methods">   <span data-item_level_2_top-title="text">Методы</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="18945">Методы контейнера</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="53743">Методы массива HTMLixArray</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="34965">Методы пользовательских событий</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="49794">Методы экземпляра приложения</a>
							   </li></ul>
						</li><li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="additional_settings">   <span data-item_level_2_top-title="text">Дополнительные настройки</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="97160">Шаблон "template" для массива </a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="42723">Способы указания свойств</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="16593">Уточняющий селектор ( selector ) для массива</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="74959">HtmlixRouter </a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="6596">События создания приложения и компонентов</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="62">Загрузка шаблонов из .js файла - templateVar</a>
							   </li><li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="53600">Сокращенный доступ к свойствам и методам</a>
							   </li></ul>
						</li></ul>
			   </li>
			   							
		<li class="nav-item" data-menu_item="container">
					<a data-menu_item-title="text" data-menu_item-click="click" data-menu_item-class="class" data-menu_item-data="lessons" class="nav-link active" href="/">Уроки</a>
					<ul class="hover-non">
					
					<li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="create_app">   <span data-item_level_2_top-title="text">Создание приложений</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="6791">Создание прототипа SPA интернет магазина</a>
							   </li></ul>
						</li><li class="nav-item" data-item_level_2_top="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2_top-click="click" data-item_level_2_top-data="additional_topics">   <span data-item_level_2_top-title="text">Дополнительные темы</span>
								
							</a>
							<ul data-item_level_2_top-post_group="group" class="hover-non">
							
								
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="41399">Работа с пользовательскими событиями</a>
							   </li></ul>
						</li></ul>
			  </li><li class="nav-item" data-menu_item="container">
					<a data-menu_item-title="text" data-menu_item-click="click" data-menu_item-class="class" data-menu_item-data="contacts" class="nav-link" href="/">Контакты</a>
					<ul class="hover-non">
					
					</ul>
			  </li></ul>

		 <li class="nav-item toggler-nav-type" style="margin-top: 16px; margin-left: 7px; margin-right: 15px;">
			<label class="switch">
				<input data-menu-toggle_nav_type="click" type="checkbox">
				<span class="slider round"></span>
			</label>
		</li>

		
</nav>



<div data-router_main="router"><div data-sections="container" class="container-fluid" style="margin-top: 10px;">
	    <div class="row">
		
			<div data-sections-left_coll_style="style" class="col-sm-12 col-md-3" style="">
				<section class="categories">
					<ul data-sections-group_items="group" class="nav flex-column">
					
						<li class="nav-item" data-item_level_2="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2-click="click" data-item_level_2-class="class" data-item_level_2-data="create_app">   <span data-item_level_2-title="text">Создание приложений</span>
								<span data-item_level_2-simbol="text" style="color: red;">-</span>
							</a>
							<ul data-item_level_2-post_group="group" data-item_level_2-post_group_style="style" class="hover-non" style="display: ''">
							
							
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="6791">Создание прототипа SPA интернет магазина</a>
							   </li></ul>
						</li>

					<li class="nav-item" data-item_level_2="container">
							<a class="nav-link " href="/api/category/:postId" data-item_level_2-click="click" data-item_level_2-class="class" data-item_level_2-data="additional_topics">   <span data-item_level_2-title="text">Дополнительные темы</span>
								<span data-item_level_2-simbol="text" style="color: red;">-</span>
							</a>
							<ul data-item_level_2-post_group="group" data-item_level_2-post_group_style="style" class="hover-non" style="display: ''">
							
							
				
							
							<li style="" data-item_level_3="container">
									<a href="#" data-item_level_3-click="click" data-item_level_3-title="text" data-item_level_3-class="class" data-item_level_3-data="41399">Работа с пользовательскими событиями</a>
							</li></ul>
						</li></ul><!-- end categories="array" -->
				</section>
			</div>
			
			
			<div data-sections-right_coll_class="class" class="col-sm-12 col-md-9">
			
				<div class="body" data-page_single="container">
				
					<h1 data-page_single-title="text" class="mb20" style="margin-bottom: 20px;">Работа с пользовательскими событиями</h1>
	
					<p data-page_single-description="html" style="margin-bottom: 15px;"><p>В данной статье будут рассмотрены базовые принципы работы с пользовательскими событиями в Htmlix и создано небольшое приложение из четырех компонентов: формы ввода имени пользователя, приветствия, кнопки выхода из приложения, и массива с пользователями приложения. </p>
<p>Уже готовый пример можно покликать <a href="https://sergeyovechkin.github.io/tests/test-eventProps/index.html">здесь</a>.</p>
<p>После ввода имени пользователя в форму, приложение отобразит его имя в приветствии, кнопке выхода и создаст новый контейнер в массиве с пользователями, а также сохранит данные в localStorage. После перезагрузки страницы, возьмет имя из localStorage. При клике по кнопке "выйти из профиля" удалит данные со всех компонентов и переменную из localStorage.</p>
<p>Давайте создадим четыре компонента: форму входа - form, приветствие - greeting, кнопку выхода - logout и массив со всеми посетителями - users_array, и посмотрим как бы мы создавали между ними коммуникацию если бы не пользовались пользовательскими событиями.</p>
<p>Создадим html разметку всех компонентов:</p>
<pre><code class="html language-html"> <span class="js-comments"> &lt;!--  компонент - контейнер форма с двумя свойствами input c типом свойства "inputvalue" и  click с типом "click" --&gt;</span>

<span class="js-vars">&lt;form</span> data-<span class="data-main-attr">form</span><span class="data-attr"></span>="container" class="card col-12"&gt;
   <span class="tag">&lt;div</span> class="form-group"&gt;
       &lt;label for=""&gt;Введите имя&lt;/label&gt;
      <span class="input-vars">&lt;textarea</span> data-<span class="data-main-attr">form</span>-<span class="data-attr">input</span>="inputvalue" class="form-control" rows="1"&gt;<span class="input-vars">&lt;/textarea&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="js-vars">&lt;button</span> data-<span class="data-main-attr">form</span>-<span class="data-attr">click</span>="click" type="submit"&gt;Submit<span class="js-vars">&lt;/button&gt;</span>
<span class="js-vars">&lt;/form&gt;</span>


<span class="js-comments">
&lt;!-- компонент - контейнер приветствие и свойство user_name с типом - "text" --&gt;</span>

<span class="tag">&lt;div</span> data-<span class="data-main-attr">greeting</span><span class="data-attr"></span>="container" class="col-6 card"&gt;            
    <span class="tag">&lt;p</span>&gt;Привет<span class="js-vars">:</span> <span class="tag">&lt;span</span>  data-<span class="data-main-attr">greeting</span>-<span class="data-attr">user_name</span>="text"&gt;guest<span class="tag">&lt;/span&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/div&gt;</span>


<span class="js-comments">
&lt;!-- компонент - контейнер кнопка выхода и свойство user_name с типом - "text" --&gt;</span>

<span class="tag">&lt;div</span> data-<span class="data-main-attr">logout</span><span class="data-attr"></span>="container" class="col-6 card"&gt;        
      &lt;a href="#"&gt; Выйти из профиля<span class="js-vars">:</span> ( <span class="tag">&lt;span</span>  data-<span class="data-main-attr">logout</span>-<span class="data-attr">user_name</span>="text"&gt;<span class="tag">&lt;/span&gt;</span>  )
      &lt;/a&gt;                
<span class="tag">&lt;/div&gt;</span>

<span class="js-comments">
&lt;!-- компонент - массив пользователей, изначально с двумя контейнерами, в каждом контейнере свойство user_name - "text"  --&gt;</span> 

<span class="tag">&lt;div</span> class="container-fluid" style="border<span class="js-vars">:</span> 1px solid red; margin-top<span class="js-vars">:</span> 20px;"&gt;
     <span class="tag">&lt;p</span>&gt; все пользователи:<span class="tag">&lt;/p&gt;</span>

      <span class="tag">&lt;div</span> data-<span class="data-main-attr">users_array</span><span class="data-attr"></span>="array" class="row"&gt;

         <span class="tag">&lt;div</span> data-<span class="data-main-attr">user</span><span class="data-attr"></span>="container" class="col-4 card"&gt;        
         <span class="tag">&lt;p</span>&gt;пользователь - 
                    <span class="tag">&lt;span</span> data-<span class="data-main-attr">user</span>-<span class="data-attr">user_name</span>="text"&gt;user_name_1<span class="tag">&lt;/span&gt;</span> 
            <span class="tag">&lt;/p&gt;</span>                        
    <span class="tag">&lt;/div&gt;</span>

         <span class="tag">&lt;div</span> data-<span class="data-main-attr">user</span><span class="data-attr"></span>="container" class="col-4 card"&gt;        
         <span class="tag">&lt;p</span>&gt;пользователь - 
                    <span class="tag">&lt;span</span> data-<span class="data-main-attr">user</span>-<span class="data-attr">user_name</span>="text"&gt;user_name_1<span class="tag">&lt;/span&gt;</span> 
            <span class="tag">&lt;/p&gt;</span>                        
    <span class="tag">&lt;/div&gt;</span>

     <span class="tag">&lt;/div&gt;</span>    
<span class="tag">&lt;/div&gt;</span>
</code></pre>
<p>Теперь перенесем их в javascript:</p>
<pre><code class="javascript language-javascript"><span class="js-vars">var</span> StateMap <span class="js-vars">=</span> {

    form<span class="js-vars">:</span> {<span class="js-comments">//форма входа</span>
        container<span class="js-vars">:</span> "form",
        props<span class="js-vars">:</span> ["input", "click"],
        methods<span class="js-vars">:</span> {

            click<span class="js-vars">:</span> <span class="js-vars-2">function</span>(){
                event.preventDefault(); <span class="js-comments">//отменяем перезагрузку страницы</span>

                                 <span class="js-comments">//получаем данные свойства input</span>
                <span class="js-vars">var</span> text <span class="js-vars">=</span> <span class="js-vars-2">this</span>.<span class="tag">parent</span>.props.input.<span class="js-vars-2">getProp</span>(); 
                <span class="js-vars-2">console</span>.log(text);                          
            }           
        },      
    },  
    greeting<span class="js-vars">:</span> {<span class="js-comments">//приветствие</span>

        container<span class="js-vars">:</span> "greeting",
        props<span class="js-vars">:</span> [ "user_name", ], 
        methods<span class="js-vars">:</span> {
            }
    },
    logout<span class="js-vars">:</span> { <span class="js-comments">//кнопка выхода</span>

        container<span class="js-vars">:</span> "logout",
        props<span class="js-vars">:</span> [ "user_name", ], 
        methods<span class="js-vars">:</span> {
        },  
    },
    users_array<span class="js-vars">:</span> { <span class="js-comments">//массив с пользователями </span>

        container<span class="js-vars">:</span> "user",
        props<span class="js-vars">:</span> [ "user_name", ],
        methods<span class="js-vars">:</span> {        
        },          
    },
}
window.onload <span class="js-vars">=</span> <span class="js-vars-2">function</span>(){<span class="js-comments">//создаем экземпляр приложения htmlix</span>

    <span class="js-vars">var</span> HM <span class="js-vars">=</span> <span class="js-vars">new</span> HTMLixState(StateMap);
    <span class="js-vars-2">console</span>.log(HM);    
}
</code></pre>
<p>В примере выше мы записали данные свойства "input" из компонента формы в переменную "text". Теперь нам нужно отобразить их в свойствах компонентов greeting и logout, а также создать новый контейнер в массиве users_array. Для понимания того зачем нужны пользовательские события давайте сначала попробуем сделать это различными способами без их использования.</p>
<p><b>1.</b> способ - в самом методе click формы напрямую перейти к каждому компоненту и установить свойство text:</p>
<pre><code class="javascript language-javascript">        event.preventDefault();
        <span class="js-vars">var</span> text <span class="js-vars">=</span> <span class="js-vars-2">this</span>.<span class="tag">parent</span>.props.input.<span class="js-vars-2">getProp</span>();
                <span class="js-comments">//установили значения свойствам</span>
                <span class="js-vars-2">this</span>.rootLink.state["greeting"].props.user_name.<span class="js-vars-2">setProp</span>(text);
                <span class="js-vars-2">this</span>.rootLink.state["logout"].props.user_name.<span class="js-vars-2">setProp</span>(text);

                  <span class="js-comments">///создали новый контейнер</span>
                 <span class="js-vars-2">this</span>.rootLink.state["users_array"].add({user_name<span class="js-vars">:</span> text});
</code></pre>
<p>Недостаток данного подхода очевиден, что если потом мы где-нибудь еще будем получать данные для этого свойства? Например на основе localstorage они будут загружаться автоматически.</p>
<p><b>2.</b> способ это создать метод в объекте stateMethods и вызывать его при изменении данных:</p>
<pre><code class="javascript language-javascript">ststeMethods<span class="js-vars">:</span> {

         entryUser<span class="js-vars">:</span> <span class="js-vars-2">function</span>(text){

                <span class="js-vars-2">this</span>.state["greeting"].props.user_name.<span class="js-vars-2">setProp</span>(text);
                <span class="js-vars-2">this</span>.state["logout"].props.user_name.<span class="js-vars-2">setProp</span>(text);
                 <span class="js-vars-2">this</span>.state["users_array"].add({user_name<span class="js-vars">:</span> text});
       }
}

<span class="js-comments">// после загрузки страници</span>
window.onload <span class="js-vars">=</span> <span class="js-vars-2">function</span>(){
             <span class="js-vars">var</span> name <span class="js-vars">=</span> window.localStorage.getItem('user_name');

             if(name)HM.stateMethods.entryUser.call.(HM, name); <span class="js-comments">///вызываем метод передав ему контекст= HM</span>
}

<span class="js-comments">//в форме</span>
click<span class="js-vars">:</span> <span class="js-vars-2">function</span>(){
                  event.preventDefault();
          <span class="js-vars">var</span> text <span class="js-vars">=</span> <span class="js-vars-2">this</span>.<span class="tag">parent</span>.props.input.<span class="js-vars-2">getProp</span>();
                  <span class="js-vars-2">this</span>.rootLink.stateMethods.entryUser.call.(this.rootLink, text); 
}
</code></pre>
<p>В данном случае нам удалось избежать дублирования кода, однако проблема в том что методы для работы со свойствами компонента находятся не внутри него а во внешних функциях. Что если перед тем как установить свойство его нужно как-то отформатировать, по разному для каждого компонента, или  нам нужно будет установить не одно свойство, а несколько, поэтому лучше когда компоненты сами работают со своими свойствами. </p>
<p><b>3.</b> способ - перенести всю логику работы со свойствами в компоненты, и создать в них методы, с помощью которых вызывать определенные действия.</p>
<pre><code class="javascript language-javascript">    greeting<span class="js-vars">:</span> {

        container<span class="js-vars">:</span> "greeting",

                <span class="js-comments">//добавили вспомогательный метод для приветствия пользователя</span>
        props<span class="js-vars">:</span> [ "user_name", ["greet_user", "aux"] ], 
        methods<span class="js-vars">:</span> {

                     greet_user<span class="js-vars">:</span> <span class="js-vars-2">function</span>(name){
                                <span class="js-vars-2">this</span>.props.user_name.<span class="js-vars-2">setProp</span>(name+" !!!");
                     }
            }
    },
    logout<span class="js-vars">:</span> {       
        container<span class="js-vars">:</span> "logout",

        props<span class="js-vars">:</span> [ "user_name", ["set_name", "aux"]], <span class="js-comments">//добавили вспомогательный метод для работы со свойством компонента</span>
        methods<span class="js-vars">:</span> {

                     set_name<span class="js-vars">:</span> <span class="js-vars-2">function</span>(name){
                                <span class="js-vars-2">this</span>.props.user_name.<span class="js-vars-2">setProp</span>(name);
                     }

        },  
    },
    users_array<span class="js-vars">:</span> { 
        arrayProps<span class="js-vars">:</span> [["entry_user", "aux"]],  <span class="js-comments">///добавляем контейнер с новым пользователем из массива</span>
                arrayMethods<span class="js-vars">:</span> {
                       entry_user<span class="js-vars">:</span> <span class="js-vars-2">function</span>(name){
                              <span class="js-vars-2">this</span>.add({user_name<span class="js-vars">:</span> name})
                       }
               }    
        container<span class="js-vars">:</span> "user",
        props<span class="js-vars">:</span> [ "user_name", ],
        methods<span class="js-vars">:</span> {        
        },          
    },
    stateMethods<span class="js-vars">:</span> {   <span class="js-comments">//изменили общий метод          </span>
         entryUser<span class="js-vars">:</span> <span class="js-vars-2">function</span>(text){

                <span class="js-vars-2">this</span>.state["greeting"].methods.greet_user(text);
                <span class="js-vars-2">this</span>.state["logout"].methods.set_name(text);
                <span class="js-vars-2">this</span>.state["users_array"].methods.entry_user(text);
        }
   }
   <span class="js-comments">//далее также вызываем данный метод entryUser из формы и при загрузке страницы</span>
</code></pre>
<p>Теперь компоненты инкапсулированы, однако  мы производим доступ к компоненту по его имени. Что если мы потом захотим изменить имя компонента или метода, или вообще удалить компонент, или у нас будет много таких компонентов которые слушают одно и тоже свойство. Или у нас будет много таких свойств, соответственно прийдется создавать много таких методов. </p>
<p>Чтобы облегчить данную задачу можно воспользоваться пользовательскими событиями. Компонент подписывается на событие, и при его наступлении делает что-то со своими свойствами.</p>
<p>Давайте отредактируем код, теперь с использованием пользовательских событий:</p>
<pre><code class="javascript language-javascript"><span class="js-vars">var</span> StateMap <span class="js-vars">=</span> {

   eventEmiters<span class="js-vars">:</span> {    
             <span class="js-comments">//создали эмитер события - входа пользователя    </span>
             ["emiter-entry-user"]<span class="js-vars">:</span> {prop<span class="js-vars">:</span> ""},         
   },
   form<span class="js-vars">:</span> {
    container<span class="js-vars">:</span> "form",
    props<span class="js-vars">:</span> ["input", "click"],
    methods<span class="js-vars">:</span> {

        click<span class="js-vars">:</span> <span class="js-vars-2">function</span>(){
            event.preventDefault();
            <span class="js-vars">var</span> text <span class="js-vars">=</span> <span class="js-vars-2">this</span>.<span class="tag">parent</span>.props.input.<span class="js-vars-2">getProp</span>();

             <span class="js-comments">//вызвали событие в форме и передали в него данные</span>
            <span class="js-vars-2">this</span>.rootLink.eventProps["emiter-entry-user"].setEventProp(text);   
            window.localStorage.setItem('user_name', text);                         
        }           
    },      
},    
greeting<span class="js-vars">:</span> {

    container<span class="js-vars">:</span> "greeting",
    props<span class="js-vars">:</span> [ "user_name", ['listen_entry_user', "emiter-entry-user", "" ] ], <span class="js-comments">//добавили слушатель события "emiter-entry-user"</span>
    methods<span class="js-vars">:</span> {

        listen_entry_user<span class="js-vars">:</span> <span class="js-vars-2">function</span>(){
           <span class="js-comments">//получили данные из события и обновили свойство</span>
           <span class="js-vars-2">this</span>.<span class="tag">parent</span>.props.user_name.<span class="js-vars-2">setProp</span>( <span class="js-vars-2">this</span>.emiter.getEventProp() );
        },  
    },      
},
logout<span class="js-vars">:</span> { 

    container<span class="js-vars">:</span> "logout",
    props<span class="js-vars">:</span> [ "user_name", ["listen_entry_user", "emiter-entry-user", "" ]], <span class="js-comments">//свойство слушатель события "emiter-entry-user"</span>
    methods<span class="js-vars">:</span> {

        listen_entry_user<span class="js-vars">:</span> <span class="js-vars-2">function</span>(){
             <span class="js-comments">//получили данные из события и обновили свойство </span>
             <span class="js-vars-2">this</span>.<span class="tag">parent</span>.props.user_name.<span class="js-vars-2">setProp</span>( <span class="js-vars-2">this</span>.emiter.getEventProp() );
        },          
    },  
},
    <span class="js-comments">//здесь слушатель события добавляется в свойство массива, т.к. если добавить его в контейнер оно будет вызвано для каждого контейнера </span>
users_array<span class="js-vars">:</span> { 

    arrayProps<span class="js-vars">:</span> [ ['listen_entry_user', "emiter-entry-user", ""] ], <span class="js-comments">//свойство слушатель события "emiter-entry-user"</span>
       arrayMethods<span class="js-vars">:</span> {

        listen_entry_user<span class="js-vars">:</span> <span class="js-vars-2">function</span>(){
            <span class="js-comments">//получили данные из события и создали новый контейнер</span>
            <span class="js-vars-2">this</span>.<span class="tag">parent</span>.add( {user_name<span class="js-vars">:</span> <span class="js-vars-2">this</span>.emiter.getEventProp()} );
        },          
    },      
    container<span class="js-vars">:</span> "user",
    props<span class="js-vars">:</span> [ "user_name",  ['listen_exit_user', "emiter-exit-user", ""]  ],
    methods<span class="js-vars">:</span> {                      
        }
    },          
},

}
window.onload <span class="js-vars">=</span> <span class="js-vars-2">function</span>(){


    <span class="js-vars">var</span> HM <span class="js-vars">=</span> <span class="js-vars">new</span> HTMLixState(StateMap);
    <span class="js-vars">var</span> name <span class="js-vars">=</span> window.localStorage.getItem('user_name');

    if(name != null)HM.eventProps["emiter-entry-user"].setEventProp(name); <span class="js-comments">///вызвали событие "emiter-entry-user" при загрузке сайта и передали в него данные   </span>
}
</code></pre>
<p>Таким образом мы избавились от промежуточного метода "entryUser" и просто вызываем событие передав в него новые данные в форме и после загрузки страницы. Теперь если нам нужно изменить что-либо в компоненте, или вообще удалить его нам не потребуется поправлять код в каждой функции, которых может быть сколько угодно. А чтобы отписаться от какого либо события можно просто удалить слушателя в компоненте, или временно отключить его с помощью метода disableEvent() в свойстве - подписчике.</p>
<p>Полный код данного примера вместе со вторым событием "emiter-exit-user" можно посмотреть <a href="https://github.com/SergeyOvechkin/tests/tree/master/test-eventProps">здесь</a>.</p></p>			
					
				</div><!-- end page_single -->
			</div>	<!-- end router_page -->  			
			
			
			

		</div><!-- row -->
</div></div>  <!-- router_main -->



 



</div><!-- container-fluid -->	

	<script src="https://sergeyovechkin.github.io/simple-cms/dbase/CATEGORIES.js"></script>
	<script src="https://sergeyovechkin.github.io/simple-cms/dbase/SECTIONS.js"></script>
	<script src="https://sergeyovechkin.github.io/simple-cms/dbase/category_id.js"></script>
	
	<script src="https://sergeyovechkin.github.io/simple-cms/static/template/template.js"></script>
	
	<script src="https://sergeyovechkin.github.io/simple-cms/static/js/htmlix.js"></script>
	<script src="https://sergeyovechkin.github.io/simple-cms/static/js/front.js"></script>
		<script src="https://sergeyovechkin.github.io/simple-cms/static/js/tagWraper.js"></script>
</body>
 </html>